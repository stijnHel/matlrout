function x=ispecgram(B)%ispecgram - Inversie van specgram%  Bepaalt tijdsignaal uit spectrogram%    Momenteel enkel werkend voor standaard-instellingen van%       spectrogram en even FFT-lengtes :%           windowlengte == FFT-lengte%           overlap == (FFT-lengte)/2%           hanning window%   x=ispecgram(B)if ~rem(size(B,1),2)	error('Verkeerde lengte')endNfft=(size(B,1)-1)*2;Nwin=Nfft;Noverlap=Nfft/2;HW=hanning(Nwin);l=Noverlap*(size(B,2)-1)+Nfft;x=zeros(l,1);n1=min(floor(Nfft/10),100);	% lengte van nullen voor en na (niet gebruikte delen)n2=50;	% halve lengte van overgangn3=Nfft-2*n1-4*n2-2;	% lengte van middelste gedeelte (allemaal 1)f=inline('.75*x-x.^3/4+.5','x');	% hulpfunctie : overgang (geleidelijke overgang van 0 naar 1 en terug)F=[zeros(n1,1);f((-n2:n2)'/n2);ones(n3,1);f((n2:-1:-n2)'/n2);zeros(n1,1)];	% gewichtsverdelingxs=x;for i=1:size(B,2)	Y=[B(:,i);conj(B(end-1:-1:2,i))];	y=real(ifft(Y))./HW;	ii=(i-1)*Noverlap;	xs(ii+1:ii+Nfft)=xs(ii+1:ii+Nfft)+F;	x(ii+1:ii+Nfft)=x(ii+1:ii+Nfft)+(F.*y);endx=x./max(0.1,xs);